{
  "description": "Democratic CSI plugin for Docker Swarm",
  "documentation": "https://github.com/democratic-csi/democratic-csi",
  "entrypoint": [
    "/home/csi/app/bin/democratic-csi",
    "--driver-config-file", "/etc/democratic-csi.yml",
    "--log-level", "silly",
    "--csi-version", "1.0.0",
    "--csi-name", "democratic-csi",
    "--server-socket", "/run/docker/plugins/democratic-csi.sock"
  ],
  "interface": {
    "types": [
      "docker.csicontroller/1.0",
      "docker.csinode/1.0"
    ],
    "socket": "democratic-csi.sock"
  },
  "network": {
    "type": "host"
  },
  "linux": {
    "capabilities": [
      "CAP_SYS_ADMIN"
    ],
    "allowAllDevices": true
  },
  "propagatedMount": "/data/published",
  "mounts": [
    {
      "name": "democratic-csi-config",
      "description": "Democratic CSI configuration file",
      "source": "/etc/democratic-csi.yml",
      "destination": "/etc/democratic-csi.yml",
      "type": "bind",
      "options": ["bind","ro"]
    },
  ],
  "env": [
    {
      "description": "The CSI socket endpoint for plugin-controller communication",
      "name": "CSI_ENDPOINT",
      "value": "unix:///run/docker/plugins/democratic-csi.sock"
    },
    {
      "description": "Method used to detect filesystem types (blkid or lsblk)",
      "name": "FILESYSTEM_TYPE_DETECTION_STRATEGY",
      "value": "blkid"
    }
  ] 
}
