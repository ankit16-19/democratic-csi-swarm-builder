{
  "description": "Democratic CSI plugin for Docker Swarm",
  "documentation": "https://github.com/democratic-csi/democratic-csi",
  "entrypoint": [
    "/home/csi/app/bin/democratic-csi",
    "--driver-config-file", "/etc/democratic-csi.yml",
    "--log-level", "info",
    "--csi-version", "1.0.0",
    "--csi-name", "democratic-csi",
    "--server-socket", "/run/docker/plugins/democratic-csi.sock"
  ],
  "interface": {
    "types": [
      "docker.csicontroller/1.0",
      "docker.csinode/1.0"
    ],
    "socket": "democratic-csi.sock"
  },
  "network": {
    "type": "host"
  },
  "linux": {
    "capabilities": ["CAP_SYS_ADMIN"]
  },
  "mounts": [
    {
      "name": "democratic-csi-config",
      "description": "Democratic CSI configuration file",
      "source": "/etc/democratic-csi.yml",
      "destination": "/etc/democratic-csi.yml",
      "type": "bind",
      "options": ["bind","ro"]
    },
    {
      "name": "host-dir",
      "description": "Host filesystem for CSI chroot",
      "source": "/",
      "destination": "/host",
      "type": "bind",
      "options": ["bind","rbind","rshared"]
    },
    {
      "name": "dev",
      "description": "Host /dev",
      "source": "/dev",
      "destination": "/dev",
      "type": "bind",
      "options": ["bind","rbind"]
    },
    {
      "name": "mount-binary",
      "description": "Host mount binary",
      "source": "/usr/bin/mount",
      "destination": "/usr/bin/mount",
      "type": "bind",
      "options": ["bind", "ro"]
    }
  ],
  "env": [
    {
      "name": "CSI_ENDPOINT",
      "value": "unix:///run/docker/plugins/democratic-csi.sock"
    },
    {
      "name": "DEMOCRATIC_CSI_LOG_LEVEL",
      "value": "silly"
    }
  ]
}