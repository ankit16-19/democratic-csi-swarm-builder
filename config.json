{
  "description": "Democratic CSI plugin for Docker Swarm",
  "documentation": "https://github.com/democratic-csi/democratic-csi",
  "entrypoint": [
    "/home/csi/app/bin/democratic-csi",
    "--driver-config-file", "/etc/democratic-csi.yml",
    "--log-level", "info",
    "--csi-version", "1.9.0",
    "--csi-name", "democratic-csi",
    "--server-socket", "/run/docker/plugins/democratic-csi.sock"
  ],
  "interface": {
    "types": [
      "docker.csicontroller/1.0",
      "docker.csinode/1.0"
    ],
    "socket": "democratic-csi.sock"
  },
  "network": {
    "type": "host"
  },
  "linux": {
    "capabilities": ["CAP_SYS_ADMIN"]
  },
  "mounts": [
    {
      "name": "democratic-csi-config",
      "description": "Democratic CSI configuration file",
      "source": "/etc/democratic-csi.yml",
      "destination": "/etc/democratic-csi.yml",
      "type": "bind",
      "options": [
        "bind",
        "ro"
      ]
    },
    {
      "name": "host-dir",
      "description": "Host filesystem for CSI chroot",
      "source": "/",
      "destination": "/host",
      "type": "bind",
      "options": [
        "bind",
        "rbind",
        "rshared"
      ]
    },
    {
      "name": "dev-dir",
      "description": "Device directory",
      "source": "/dev",
      "destination": "/dev",
      "type": "bind",
      "options": [
        "bind",
        "rbind"
      ]
    },
    {
      "name": "sys-dir",
      "description": "sysfs directory",
      "source": "/sys",
      "destination": "/sys",
      "type": "bind",
      "options": [
        "bind",
        "ro"
      ]
    },
    {
      "name": "localtime",
      "description": "Host localtime (read-only)",
      "source": "/etc/localtime",
      "destination": "/etc/localtime",
      "type": "bind",
      "options": [
        "bind",
        "ro"
      ]
    },
    {
      "name": "udev-data",
      "description": "udev data directory",
      "source": "/run/udev",
      "destination": "/run/udev",
      "type": "bind",
      "options": [
        "bind",
        "ro"
      ]
    },
    {
      "name": "modules-dir",
      "description": "Kernel modules directory",
      "source": "/lib/modules",
      "destination": "/lib/modules",
      "type": "bind",
      "options": [
        "bind",
        "ro"
      ]
    },
    {
      "name": "iscsi-info",
      "description": "iSCSI info directory (bidirectional)",
      "source": "/var/lib/iscsi",
      "destination": "/var/lib/iscsi",
      "type": "bind",
      "options": [
        "bind",
        "rbind",
        "rshared"
      ]
    },
    {
      "name": "nvme-dir",
      "description": "NVMe directory (bidirectional)",
      "source": "/etc/nvme",
      "destination": "/etc/nvme",
      "type": "bind",
      "options": [
        "bind",
        "rbind",
        "rshared"
      ]
    },
    {
      "name": "mount-bin",
      "description": "Host util-linux mount binary",
      "source": "/usr/bin/mount",
      "destination": "/usr/local/bin/mount",
      "type": "bind",
      "options": ["bind", "ro"]
    },
    {
      "name": "lib64",
      "description": "Host libraries for mount",
      "source": "/lib64",
      "destination": "/lib64",
      "type": "bind",
      "options": ["bind", "rbind", "ro"]
    }
  ],
  "env": [
    {
      "name": "CSI_ENDPOINT",
      "value": "unix:///run/docker/plugins/democratic-csi.sock"
    },
    {
      "name": "DEMOCRATIC_CSI_LOG_LEVEL",
      "value": "verbose"
    }
  ]
}